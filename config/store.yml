_prefix:
  store:

main:
  package: DBI
  options:
    data_source: "DBI:mysql:database=librecat_main"
    username: librecat
    password: librecat
    bags:
      audit:
        mapping:
            id:
                type: string
                column: pid
                index: 1
            bag:
                type: string
            process:
                type: string
            action:
                type: string
            message:
                type: string
            time:
                type: integer
      session:
        plugins: ['Datestamps']
      publication:
        plugins: ['Datestamps', 'Versioning']
        id_generator: Incremental
      project:
        plugins: ['Datestamps']
      user:
        plugins: ['Datestamps']
      department:
        plugins: ['Datestamps']
      research_group:
        plugins: ['Datestamps']
      message:
        plugins: ['Datestamps']
      reqcopy:
        plugins: []
      temp_files:
        plugins: []

search:
  package: ElasticSearch
  options:
    client: '6_0::Direct'
    default_options:
        maximum_limit: 100
    bags:
      project:
        fix:
          - remove_field(_version)
        index: librecat_project
        settings: &index_settings
          number_of_shards: 1
          number_of_replicas: 0
          analysis:
            normalizer:
              sort_text:
                type: custom
                char_filter: []
                filter: [lowercase, my_asciifolding]
              sort_keyword:
                type: custom
                char_filter: []
                filter: [lowercase]
            analyzer:
              default:
                type: custom
                tokenizer: standard
                filter: [lowercase, my_asciifolding]
              name:
                type: custom
                tokenizer: keyword
                filter: [lowercase, my_asciifolding]
              tag:
                type: custom
                tokenizer: keyword
                filter: [lowercase]
            filter:
                my_asciifolding:
                    type: asciifolding
                    preserve_original: 'true'
                # This requires the icu_collation plugin see our guidelines
                # https://github.com/LibreCat/LibreCat/wiki/Installation
                # To use this filter add it to the analyzers above. E.g.
                # filter: [lowercase, my_language]
                #
                # my_language:
                #    type: icu_collation
                #    language: de
                #    country: DE
        mapping:
          dynamic: 'false'
          properties:
            all:
                type: text
            date_created: {type: date, format: date_time_no_millis}
            date_updated: {type: date, format: date_time_no_millis}
            name:
              type: text
              copy_to: all
              fields:
                exact: {type: text, analyzer: tag}
                sort: &sort_text
                  type: keyword
                  store: 'false'
                  normalizer: sort_text
            active: {type: byte}
            acronym:
              type: keyword
              copy_to: all
            alternative_name:
              type: text
              copy_to: all
              fields:
                exact: {type: text, analyzer: tag}
                sort: *sort_text
            grant_number: {type: keyword, copy_to: all}
            psp_element: {type: keyword, copy_to: all}
            call_identifier: {type: keyword, copy_to: all}
            description: {type: text, copy_to: all}
            funder:
              type: text
              copy_to: all
              fields:
                exact: {type: text, analyzer: name}
            funded: {type: text, analyzer: tag}
            sc39: {type: text, analyzer: tag}
            start_date:
              type: keyword
            end_date:
              type: keyword
            cooperator: {type: text, analyzer: name, copy_to: all}
            department:
              properties:
                _id: {type: keyword}
                name:
                  type: text
                  copy_to: all
                  fields:
                    exact: {type: text, analyzer: tag}
            owner: &personField2
              properties:
                id: {type: keyword}
                name:
                  properties:
                    full_name:
                      type: text
                      copy_to: all
                      fields:
                        exact: {type: text, analyzer: tag}
            principal_investigator: *personField2
            member: *personField2
            project_type: {type: text}
        cql_mapping:
          default_index: basic
          indexes:
            id:
              op:
                'any': true
                'all': true
                '=': true
                'exact': true
              field: '_id'
              sort: 'true'
            basic:
              op:
                'any': true
                'all': true
                '=': true
                '<>': true
              field: ['all','_id']
              description: "index with common fields..."
            name:
              op:
                'any': true
                'all': true
                '=': true
                'exact': { field: "name.exact" }
              field: 'name'
              sort: {field: 'name.sort'}
            active: &active
              op:
                '=': true
                'exact': true
                '<>': true
              field: 'active'
            isactive: *active
            sc39:
              op:
                '=': true
              field: 'sc39'
            acronym:
              op:
                'any': true
                'all': true
                '=': true
                'exact': true
            altname:
              op:
                'any': true
                'all': true
                '=': true
                'exact': true
              field: { field: 'alternative_name.exact' }
              sort: {field: 'alternative_name.sort'}
            grantno:
              op:
                '=': true
                'exact': true
              field: 'grant_number'
            pspelement:
              op:
                '=': true
                'exact': true
              field: 'psp_element'
            description:
              op:
                'any': true
                'all': true
                '=': true
                'exact': true
              field: 'description'
            funder:
              op:
                'any': true
                'all': true
                '=': true
                'exact': { field: 'funder.exact' }
              field: 'funder'
            funded:
              op:
                '=': true
                'exact': true
              field: 'funded'
            startyear:
              op:
                '=': true
                'exact': true
                'within': true
                '>': true
                '>=' : true
                '<': true
                '<=' : true
              field: 'start_date'
              sort: 'true'
            endyear:
              op:
                '=': true
                'exact': true
                'within': true
                '>': true
                '>=' : true
                '<': true
                '<=' : true
              field: 'end_date'
              sort: 'true'
            department:
              op:
                'all': true
                'any': true
                '=': true
                'exact': {field: 'department.name.exact'}
              field: ['department._id', 'department.name']
            cooperator:
              op:
                'any': true
                'all': true
                '=': true
              field: 'cooperator'
            coordinator:
              op:
                'any': true
                'all': true
                '=': true
                'exact': {field: 'owner.name.full_name.exact'}
              field: ['owner.name.full_name', 'owner.id']
            investigators:
              op:
                'any': true
                'all': true
                '=': true
                'exact': {field: 'principal_investigators.name.full_name.exact'}
              field: ['principal_investigator.name.full_name', 'principal_investigator.id']
            members:
              op:
                'any': true
                'all': true
                '=': true
                'exact': {field: 'member.name.full_name.exact'}
              field: ['member.name.full_name', 'member.id']
            person:
              op:
                'any': true
                'all': true
                '=': true
                'exact': {field: ['owner.name.full_name.exact', 'principal_investigator.name.full_name.exact', 'member.name.full_name.exact']}
              field: ['owner.name.full_name', 'owner.person_number', 'principal_investigator.name.full_name', 'principal_investigator.person_number', 'member.name.full_name', member.person_number']
            projecttype:
              op:
                'any': true
                'all': true
                '=': true
              field: 'project_type'
      publication:
        index: librecat_publication
        fix:
            - remove_field(_version)
            - file_date_updated()
        settings: *index_settings
        mapping:
          dynamic: 'false'
          properties:
            all:
              type: text
            date_created: {type: date, format: date_time_no_millis}
            date_updated: {type: date, format: date_time_no_millis}
            title: &titleField
              type: text
              copy_to: all
              fields:
                exact: {type: text, analyzer: tag}
                sort: *sort_text
            alternative_title: *titleField
            author: &personField
              type: object
              properties:
                id: {type: keyword, copy_to: all}
                full_name:
                  type: text
                  copy_to: all
                  fields:
                    exact: {type: text, analyzer: tag}
            editor: *personField
            translator: *personField
            supervisor: *personField
            creator:
              properties:
                id: {type: keyword}
                login: {type: keyword}
            type: {type: keyword}
            type_old: {type: keyword}
            research_data: {type: byte}
            year: {type: date, format: year, copy_to: all}
            language:
              properties:
                iso: {type: keyword}
            extern: {type: byte}
            funded_apc: {type: byte}
            quality_controlled: {type: byte}
            popular_science: {type: byte}
            ec_funded: {type: byte}
            volume: {type: text, analyzer: tag}
            intvolume:
              type: integer
            issue: {type: text}
            article_type: {type: keyword}
            article_number: {type: text, analyzer: tag}
            thematic_area: {type: text, analyzer: tag}
            publication_identifier:
              properties:
                isbn: &pub_id_field
                  type: keyword
                  copy_to: all
                issn: *pub_id_field
                eissn: *pub_id_field
                eisbn: *pub_id_field
                unknown: *pub_id_field
            status: {type: keyword}
            publication_status: {type: keyword}
            report_number: {type: keyword}
            ipn: {type: keyword}
            application_number: {type: text, index: 'false'}
            conference:
              properties:
                name:
                  type: text
                  copy_to: all
                  fields:
                    exact: {type: text, analyzer: tag}
                    sort: *sort_text
                start_date: {type: keyword}
                end_date: {type: keyword}
            publishing_date: {type: keyword}
            abstract:
              properties:
                text: {type: text, copy_to: all}
            keyword:
              type: text
              copy_to: all
              fields:
                exact: {type: text, analyzer: tag}
            department:
              properties:
                _id: {type: keyword, copy_to: all}
                tree:
                  properties:
                    _id: {type: keyword, copy_to: all}
            proj: {type: byte}
            project:
              properties:
                _id: {type: keyword, copy_to: all}
                name: {type: text}
            publication:
              type: text
              copy_to: all
              fields:
                exact: {type: text, analyzer: tag}
                sort: *sort_text
            publication_date: {type: text, index: 'false'}
            series_title:
              type: text
              copy_to: all
              fields:
                exact: {type: text, analyzer: tag}
                sort: *sort_text
            publisher:
              type: text
              copy_to: all
              fields:
                exact: {type: text, analyzer: tag}
                sort: *sort_text
            doi: {type: keyword, copy_to: all}
            ddc: {type: keyword, copy_to: all}
            external_id:
              properties:
                isi: {type: keyword, copy_to: all}
                arxiv: {type: keyword, copy_to: all}
                pmid: {type: keyword, copy_to: all}
                inspire: {type: keyword, copy_to: all}
                scoap3: {type: keyword, copy_to: all}
            isi: {type: byte}
            arxiv: {type: byte}
            pmid: {type: byte}
            inspire: {type: byte}
            scoap3: {type: byte}
            file_date_updated: {type: date, format: date_time_no_millis}
            file:
              properties:
                access_level: {type: keyword}
                date_updated: {type: date, format: date_time_no_millis}
                date_created: {type: date, format: date_time_no_millis}
                open_access: {type: keyword}
                embargo: {type: keyword}
                content_type: {type: keyword}
                file_id: {type: keyword}
                file_name: {type: keyword}
                relation: {type: keyword}
                title: {type: text}
                description: {type: text}
                creator: {type: keyword}
                request_a_copy: {type: byte}
            main_file_link:
              properties:
                url: {type: text, analyzer: tag}
                open_access: {type: byte}
            oa: {type: byte}
            alternative_id: {type: keyword, copy_to: all}
            defense_date: {type: date, index: 'false'}
            locked: {type: byte}
            user_id: {type: text, index: 'false'}
            citation: {type: object, enabled: 'false'}
            license: {type: keyword}
        cql_mapping:
          default_index: basic
          indexes:
            title:
              op:
                'any': true
                'all': true
                '=': true
                '<>': true
                '>': {field: 'title.exact'}
                'exact': {field: ['title.exact', 'alternative_title.exact']}
              field: ['title', 'alternative_title', 'title.exact', 'alternative_title.exact']
              sort: {field: 'title.sort'}
              description: "the title of the publication"
            basic:
              op:
                'any': true
                'all': true
                '=': true
                '<>': true
                'exact': true
              field: ['all','_id']
              description: "index with common fields..."
            abstract:
              op:
                'any': true
                'all': true
                '=': true
                '<>': true
              field: 'abstract.text'
            keyword: &keyword
              op:
                'any': true
                'all': true
                '=': true
                '<>': true
                'exact': {field: 'keyword.exact'}
              field: 'keyword'
            keywords: *keyword
            issn:
              op:
                'any': true
                '=': true
                'exact': true
                '<>': true
              field: 'publication_identifier.issn'
              sort: {field: 'publication_identifier.issn'}
              description: "journal/series identifier"
            eissn:
              op:
                'any': true
                '=': true
                'exact': true
                '<>': true
              field: 'publication_identifier.eissn'
              sort: {field: 'publication_identifier.eissn'}
              description: "ejournal/series identifier"
            isbn:
              op:
                'any': true
                '=': true
                'exact': true
                '<>': true
              field: 'publication_identifier.isbn'
              sort: {field: 'publication_identifier.isbn'}
              description: "unique publication identifier"
            eisbn:
              op:
                'any': true
                '=': true
                'exact': true
                '<>': true
              field: 'publication_identifier.eisbn'
              sort: {field: 'publication_identifier.eisbn'}
            project:
              op:
                'any': true
                'all': true
                '=': true
                '<>': true
                'exact': true
              field: 'project._id'
            conference:
              op:
                'any': true
                'all': true
                '=': true
                '<>': true
                'exact': {field: 'conference.name.exact'}
              field: 'conferenceName'
              sort: {field: 'conference.name.sort'}
            extern: &extern
              op:
                '=': true
                'exact': true
                '<>': true
              field: 'extern'
              values: '0 or 1'
              description: '1 if not a UniBi publication'
            oai_deleted:
              op:
                '=': true
                'exact': true
              field: 'oai_deleted'
            qualitycontrolled:
              op:
                '=': true
                'exact': true
                '<>': true
              field: 'quality_controlled'
              values: '0 or 1'
            popularscience:
              op:
                '=': true
                'exact': true
                '<>': true
              field: 'popular_science'
              values: '0 or 1'
            ecfunded:
              op:
                '=': true
                'exact': true
                '<>': true
              field: 'ec_funded'
              values: '0 or 1'
              description: "funded by the European Commission (EC)"
            proj:
              op:
                '=': true
                'exact': true
                '<>': true
              field: 'proj'
              values: '0 or 1'
            publicationidentifier:
              op:
                '=': true
                'exact': true
                '<>': true
              field: ['publication_identifier.issn', 'publication_identifier.isbn', 'publication_identifier.eissn', 'publication_identifier.eisbn']
              description: 'searches fields isbn, issn and eissn'
            id:
              op:
                '=': true
                'exact': true
                '<>': true
                '>': true
                '<': true
                '<=': true
                '>=': true
                'any': true
              field: '_id'
              sort: true
              description: "the unique LibreCat ID"
            orcid:
              op:
                '=': true
                '<>': true
                'exact': true
              field: ['author.orcid','editor.orcid', 'translator.orcid']
              description: 'Search publications by an author by his/her orcid ID'
            externalidentifier:
              op:
                '=': true
                '<>': true
                'exact': true
              field: ['external_id.isi', 'external_id.arxiv', 'external_id.pmid', 'external_id.inspire', 'external_id.ahf', 'external_id.scoap3', 'external_id.phillister', 'external_id.opac']
            isi:
              op:
                '=': true
                '<>': true
              field: 'isi'
            arxiv:
              op:
                '=': true
                '<>': true
              field: 'arxiv'
            pmid:
              op:
                '=': true
                '<>': true
              field: 'pmid'
            inspire:
              op:
                '=': true
                '<>': true
              field: 'inspire'
            ahf:
              op:
                '=': true
                '<>': true
              field: 'ahf'
            scoap3:
              op:
                '=': true
                '<>': true
              field: 'scoap3'
            phillister:
              op:
                '=': true
                '<>': true
              field: 'phillister'
            opac:
              op:
                '=': true
                '<>': true
              field: 'opac'
            reportnumber:
              op:
                '=': true
                'exact': true
                '<>': true
              field: 'report_number'
            patentnumber:
              op:
                '=': true
                'exact': true
                '<>': true
              field: 'ipn'
            doi:
              op:
                '=': true
                'exact': true
              field: 'doi'
            year: &year
              op:
                '>': true
                '<': true
                '>=': true
                '<=': true
                'within': true
                '=': true
                'exact': true
                '<>': true
                'any': true
              field: 'year'
              sort: true
              values: "date in the form yyyy"
              description: "publishing year of the publication"
            publishingyear: *year
            author:
              op:
                'any': true
                'all': true
                '=': true
                '<>': true
                'exact': {field: ['author.full_name.exact', 'author.id']}
              field: ['author.full_name', 'author.id']
            editor:
              op:
                'any': true
                'all': true
                '=': true
                '<>': true
                'exact': {field: ['editor.full_name.exact', 'editor.id']}
              field: ['editor.full_name', 'editor.id']
            translator:
              op:
                'any': true
                'all': true
                '=': true
                '<>': true
                'exact': {field: ['translator.full_name.exact', 'translator.id']}
              field: ['translator.full_name', 'translator.id']
            creator:
              op:
                'any': true
                'all': true
                '=': true
                '<>': true
                'exact': true
              field: 'creator.id'
            person:
              op:
                'any': true
                'all': true
                '=': true
                '<>': true
                'exact': {field: ['author.full_name.exact', 'author.id', 'editor.full_name.exact', 'editor.id', 'translator.full_name.exact', 'translator.id']}
              field: ['author.full_name', 'author.id', 'editor.full_name', 'editor.id', 'translator.full_name', 'translator.id']
            supervisor:
              op:
                'any':  true
                'all': true
                '=': true
                '<>': true
                'exact': {field: ['supervisor.full_name.exact', 'supervisor.id']}
              field: ['supervisor.full_name.exact', 'supervisor.id']
            department:
              op:
                '=': true
                'exact': true
                '<>': true
                'any': true
                'all': true
                '>': true
              field: ['department._id', 'department.tree._id']
              values: 'see the list of affiliations'
              description: 'will also find any subunits of the given organizationial unit'
            language:
              op:
                '=': true
                '<>': true
                'exact': true
              field: ['language.iso']
              values: 'three letter language code (iso639-2b)'
              description: 'will find the iso version of the language'
            type: &type
              op:
                '=': true
                'exact': true
                '<>': true
                'any' : true
              field: 'type'
              sort: true
              values: "see the list of publication types"
            documenttype: *type
            research_data:
              op:
                '=': true
                'exact': true
                '<>': true
              field: 'research_data'
            date_updated: &date_updated
              op:
                '>': true
                '<': true
                '>=': true
                '<=': true
                '=': true
                'exact': true
                '<>': true
              field: 'date_updated'
              sort: true
              values: "date in the form yyyy-MM-ddTHH:mm:ssZ"
            datelastchanged: *date_updated
            file_date_updated:
              op:
                '>': true
                '<': true
                '>=': true
                '<=': true
                '=': true
                'exact': true
                '<>': true
              field: 'file_date_updated'
              sort: true
              values: "date in the form yyyy-MM-ddTHH:mm:ssZ"
            publication_status: &publication_status
              op:
                '=': true
                'exact': true
                '<>': true
              field: 'publication_status'
              sort: true
              values: "see the list of publication statuses"
            publicationstatus: *publication_status
            status: &status
              op:
                '=': true
                'exact': true
                '<>': true
              field: 'status'
              sort: true
            submissionstatus: *status
            articletype: &articletype
              op:
                '=': true
                'exact': true
                '<>': true
              field: 'article_type'
            article_type: *articletype
            accesslevel:
              op:
                '=': true
                '<>': true
                'exact': true
              field: 'file.access_level'
            fulltext:
              op:
                '=': true
                'exact': true
                '<>': true
              field: 'oa'
            oa:
              op:
                '=': true
                '<>': true
              field: 'oa'
            embargo:
              op:
                '=': true
                'exact': true
                'within': true
                '>': true
                '>=' : true
                '<': true
                '<=' : true
              field: 'file.embargo'
              sort: 'true'
            publication:
              op:
                'any': true
                'all': true
                '=': true
                'exact': true
                '<>': true
              field: 'publication'
              sort: {field: 'publication.sort'}
            seriestitle:
              op:
                'any': true
                'all': true
                '=': true
                'exact': { field': 'series_title.exact' }
                '<>': true
              field: 'series_title'
              sort: {field: 'series_title.sort'}
            publisher:
              op:
                'any': true
                'all': true
                '=': true
                '<>': true
                'exact': { field: 'publisher.exact' }
              field: 'publisher'
              sort: {field: 'publisher.sort'}
            ddc:
              op:
                '=': true
                'exact': true
                '<>': true
              field: 'ddc'
              description: 'search for level 2 ddc classes'
            volume:
              op:
                '=': true
                'exact': true
                '<>': true
              field: volume
              sort: {field: 'intvolume'}
            intvolume:
              op:
                '=': true
                'exact': true
                '<>': true
              field: intvolume
              sort: true
            hide:
              op:
                '=': true
                '<>': true
              field: hide
            altid:
              op:
                '=': true
              field: alternative_id
            locked:
              op:
                '=': true
                '<>': true
              field: locked
            thematicarea:
              op:
                '=': true
                '<>': true
                'any': true
                'all': true
                'exact': true
              field: thematic_area
      user:
        fix:
            - remove_field(_version)
        index: librecat_user
        settings: *index_settings
        mapping:
          dynamic: 'false'
          properties:
            all:
              type: text
            date_created: {type: date, format: date_time_no_millis}
            date_updated: {type: date, format: date_time_no_millis}
            publication_count: {type: integer}
            full_name:
              type: text
              copy_to: all
              analyzer: name
              fields:
                exact: {type: text, analyzer: tag}
                sort: *sort_text
            last_name:
              type: text
              analyzer: name
              fields:
                sort: *sort_text
            first_name:
              type: text
              analyzer: name
              fields:
                sort: *sort_text
            old_name:
              properties:
                full_name:
                  type: text
                  copy_to: all
                  analyzer: name
                  fields:
                    exact: {type: text, analyzer: tag}
                    sort: *sort_text
                first_name: {type: text, analyzer: name}
                last_name: {type: text, analyzer: name}
            idm_title: {type: text}
            former: {type: byte}
            nonexist: {type: byte}
            researcher: {type: byte}
            email_encoded: {type: text, analyzer: tag}
            photo: {type: keyword}
            department:
              properties:
                _id: {type: keyword}
            reviewer:
              properties:
                _id: {type: keyword}
            project_reviewer:
              properties:
                _id: {type: keyword}
            access:
              properties:
                id: {type: keyword}
                name: {type: text}
            delegate: {type: text, analyzer: tag}
            data_manager:
              properties:
                _id: {type: keyword}
                name: {type: text}
            account_status: {type: text, analyzer: tag}
            super_admin: {type: byte}
            login:
              type: keyword
            ext_institution: {type: text}
            password: {type: keyword, index: 'false'}
            orcid: {type: keyword}
            inspire: {type: keyword}
            arxiv: {type: keyword}
            googleScholar: {type: keyword}
            github: {type: text, index: 'false'}
            researcherId: {type: keyword}
            scopusId: {type: keyword}
            alias: {type: text, analyzer: tag}
            email: {type: text, analyzer: tag}
            style: {type: keyword}
        cql_mapping:
          default_index: basic
          indexes:
            basic:
              op:
                'any': true
                'all': true
                '=': true
                '<>': true
              field: ['all','_id']
              description: "index with common fields..."
            fullname:
              op:
                'any': true
                'all': true
                '=': true
                '<>': true
                'exact': {field: 'full_name.exact'}
              field: full_name
              sort: {field: 'full_name.sort'}
            oldfullname:
              op:
                'any': true
                'all': true
                '=': true
                '<>': true
                'exact': {field: 'old_name.full_name.exact'}
              field: old_name.full_name
              sort: {field: 'old_name.full_name.sort'}
            lastname:
              op:
                'any': true
                'all': true
                '=': true
                '<>': true
                'exact': true
              field: ["last_name","old_name.last_name"]
              sort: {field: 'last_name.sort'}
            firstname:
              op:
                'any': true
                'all': true
                '=': true
                '<>': true
                'exact': true
              field: ["first_name","old_name.first_name"]
              sort: {field: 'first_name.sort'}
            lastname_browse:
              op:
                '=': true
              field: ['last_name']
            id:
              op:
                '=': true
                '<>': true
              field: _id
            department:
               op:
                 'all': true
                 'any': true
                 '=': true
                 'exact': {field: 'department.name.exact'}
               field: [ "department._id" , "department.tree._id" ]
            former:
              op:
                '=': true
                '<>': true
              field: former
            login:
              op:
                '=': true
              field: login
            alias:
              op:
                '=': true
                'any': true
                'all': true
                'exact': true
              field: alias
            publication_count:
              op:
                '=': true
                '>': true
                '<': true
                '<>': true
              field: publication_count
      department:
        fix:
            - remove_field(_version)
        index: librecat_department
        settings: *index_settings
        mapping:
          dynamic: 'false'
          properties:
            all:
              type: text
            date_created: {type: date, format: date_time_no_millis}
            date_updated: {type: date, format: date_time_no_millis}
            name:
              type: text
              copy_to: all
              fields:
                exact: {type: text, analyzer: tag}
                sort: *sort_text
            tree:
              properties:
                _id: {type: keyword}
            layer: {type: integer}
            inactive: {type: byte}
            display:
              type: text
              copy_to: all
              fields:
                exact: {type: text, analyzer: tag}
                sort: *sort_text
        cql_mapping:
          default_index: basic
          indexes:
            basic:
              op:
                'any': true
                'all': true
                '=': true
                '<>': true
              field: ['all','_id']
              description: "index with common fields..."
            id:
              op:
                '=': true
                '<>': true
              field: _id
            name:
              op:
                'any': true
                'all': true
                '=': true
                '<>': true
                'exact': {field: 'name.exact'}
              field: name
              sort: {field: 'name.sort'}
            name_lookup:
              op:
                'any': true
                'all': true
                '=': true
                '<>': true
                'exact': {field: 'name.exact'}
              field: ['name','name.exact']
              sort: {field: 'name.sort'}
            layer:
              op:
                '=': true
                '<>': true
              field: layer
            inactive:
              op:
                '=': true
                '<>': true
              field: inactive
            display:
              op:
                '=': true
                'all': true
              field: display
              sort: {field: 'display.sort'}
      research_group:
        fix:
            - remove_field(_version)
        index: librecat_research_group
        settings: *index_settings
        mapping:
          dynamic: 'false'
          properties:
            all:
              type: text
            date_created: {type: date, format: date_time_no_millis}
            date_updated: {type: date, format: date_time_no_millis}
            name:
              type: text
              copy_to: all
              fields:
                exact: {type: text, analyzer: tag}
                sort: *sort_text
            acronym: {type: keyword, copy_to: all}
            start_date:
              type: keyword
            end_date:
              type: keyword
            department:
              properties:
                _id: {type: keyword}
                name:
                  type: text
                  copy_to: all
                  fields:
                    exact: {type: text, analyzer: tag}
        cql_mapping:
          default_index: basic
          indexes:
            basic:
              op:
                'any': true
                'all': true
                '=': true
                '<>': true
              field: ['all','_id']
            id:
              op:
                '=': true
                '<>': true
              field: _id
            name:
              op:
                'any': true
                'all': true
                '=': true
                '<>': true
                'exact': {field: 'name.exact'}
              field: name
              sort: {field: 'name.sort'}
            name_lookup:
              op:
                'any': true
                'all': true
                '=': true
                '<>': true
                'exact': {field: 'name.exact'}
              field: ['name','name.exact']
              sort: {field: 'name.sort'}
            acronym:
              op:
                'any': true
                'all': true
                '=': true
              field: acronym
            research_area:
              op:
                'any': true
                'all': true
                '=': true
              field: research_area
            start_date: &start_date
              op:
                'any': true
                'all': true
                '=': true
                '>': true
                '<': true
                '>=': true
                '<=': true
              field: start_date
            end_date: *start_date
